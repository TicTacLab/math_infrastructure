- name: Copy tar file
  shell:  'curl -v -j -k -L -H "Cookie: oraclelicense=accept-securebackup-cookie" http://download.oracle.com/otn-pub/java/jdk/7u79-b15/jdk-7u79-linux-x64.tar.gz > jdk-7u79-linux-x64.tar.gz'
  args: {creates: "jdk-7u79-linux-x64.tar.gz"}

- name: Extract jdk
  command: "tar xzf {{ansible_env.HOME}}/jdk-7u79-linux-x64.tar.gz"
  args:
    chdir: /opt
    creates: /opt/jdk1.7.0_79
  sudo: yes

- name: Set java Env
  copy: src=common/files/java.sh dest=/etc/profile.d/01-java.sh
  sudo: yes

- name: Update alternatives
  alternatives: name="{{item}}" path="/opt/jdk1.7.0_79/bin/{{item}}" link="/usr/bin/{{item}}"
  with_items:
    - java
    - javac
  sudo: yes
