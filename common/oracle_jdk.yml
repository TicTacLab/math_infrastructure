- name: Install wget
  yum: pkg=wget state=installed
  sudo: yes

- name: Download oracle jdk 7
  command: >
    wget --no-cookies --no-check-certificate -c
    --header "Cookie: gpw_e24=http%3A%2F%2Fwww.oracle.com%2F; oraclelicense=accept-securebackup-cookie"
    "http://download.oracle.com/otn-pub/java/jdk/7u71-b14/jdk-7u71-linux-x64.tar.gz"
  args:
    creates: "jdk-7u71-linux-x64.tar.gz"

- name: Extract jdk
  command: tar xzf jdk-7u71-linux-x64.tar.gz
  args:
    creates: "{{ansible_env.HOME}}/jdk1.7.0_71"

- name: Set default java binaries
  command: "alternatives --install /usr/bin/{{item}} {{item}} {{ansible_env.HOME}}/jdk1.7.0_71/bin/{{item}} 1"
  sudo: yes
  with_items:
    - java
    - jdk
    - jar
